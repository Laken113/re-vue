{"version":3,"sources":["webpack:///webpack/bootstrap 4948bb47930feeecc9a7","webpack:///./index.js","webpack:///./src/main.js","webpack:///./src/binding.js","webpack:///./src/parser.js","webpack:///./src/parsers/directiveParser.js","webpack:///./src/directives/index.js","webpack:///./src/config.js","webpack:///./src/utils.js","webpack:///./src/observer.js","webpack:///./src/event.js","webpack:///./src/watcher.js"],"names":["TinyVue","opts","name","fn","window","prefix","Main","$el","el","document","querySelector","_bindings","_opts","_dataCopy","beforeCompiler","init","ready","self","_data","data","methods","path","item","_initReactive","_initComputed","_compileNode","key","$set","_watches","watch","cb","$watch","_binding","watches","push","obj","call","_computed","computed","computedGetter","binding","console","warn","isComputed","watcher","isObserving","getDeps","setTimeout","update","value","nodeType","_compileTextNode","attributes","length","getAttributes","forEach","attr","directive","parse","vm","_bind","childNodes","child","removeAttribute","computedKey","split","directives","error","_createBinding","bindings","childBinding","parent","children","def","Object","defineProperty","Binding","defineReactive","defineComputedProperty","len","isObj","lastKey","splice","join","get","emit","set","oldValue","prop","refresh","getter","DirectiveParser","directiveName","arg","expression","trim","indexOf","directiveInfo","slice","directiveArg","text","textContent","model","eventName","handlers","removeEventListener","e","target","addEventListener","on","handler","bind","each","typeOf","isObject","isFunc","map","extend","objectEach","objectMap","objectGet","objectSet","toString","prototype","arr","hasOwnProperty","log","keys","undefined","observer","arrProto","Array","mutationMethods","arrayObserver","method","rest","apply","event","args","array","Event","ctx","_ctx","_events","EventProto","once","fnWrap","off","arguments","events","i","Watcher","dependencies","dep"],"mappings":"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","file":"tinyVue.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId])\n \t\t\treturn installedModules[moduleId].exports;\n\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\texports: {},\n \t\t\tid: moduleId,\n \t\t\tloaded: false\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.loaded = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(0);\n\n\n\n// WEBPACK FOOTER //\n// webpack/bootstrap 4948bb47930feeecc9a7","import Main from './src/main.js';\nimport Directives from './src/directives/index.js';\n\nexport default class TinyVue extends Main {\n    constructor (opts) {\n        super(opts);\n    }\n\n    /**\n     * 自定义指令\n     */\n    static $directive (name, fn) {\n        if (!fn) {\n            return Directives[name];\n        } else {\n            Directives[name] = fn;\n        }\n    }\n}\n\nwindow.TinyVue = TinyVue;\n\n\n// WEBPACK FOOTER //\n// ./index.js","import Binding from './binding.js';\nimport Watcher from './watcher.js';\nimport { DirectiveParser } from './parser.js';\nimport { observer } from './observer.js';\n\nimport Config from './config.js';\nconst { prefix } = Config;\n\nimport { \n    extend,\n    forEach,\n    map,\n    objectEach,\n    objectMap,\n    isObject,\n    isFunc,\n    objectGet,\n    objectSet\n} from './utils.js';\n\n\n/**\n * Main class \n */\nexport default class Main {\n    constructor (opts={}) {\n        /**\n         * this.$el:  根节点\n         * _bindings: 指令与data关联的桥梁\n         */\n        this.$el = typeof opts.el === 'string' ? document.querySelector(opts.el) : opts.el;\n        \n        /**\n         * @private\n         */\n        this._bindings = {};\n        this._opts = opts;\n        this._dataCopy = {};\n\n        this.beforeCompiler();\n        this.init();\n\n        this.ready();\n    }\n\n    /**\n     * 初始化函数\n     */\n    init () {\n        let self = this;\n        let _data= this._dataCopy = extend(this._opts.data, this._opts.methods);\n        objectEach(_data, (path, item)=>{\n            this._initReactive(path, item);\n        });\n\n        this._initComputed ();\n\n        /**\n         * 指令处理\n         */\n        this._compileNode(this.$el);\n\n        /**\n         * vm响应式数据的初始化\n         */\n        for (let key in this._bindings) {\n            this.$set(key, objectGet(_data, key));                \n        }\n\n        /**\n         * watch 函数注册\n         */\n        let _watches = this._opts.watch || {};\n        objectEach(_watches, (key, cb)=>{\n            if (this._bindings[key]) {\n                this.$watch(key, cb);\n            }\n        });\n    }\n\n    //public api\n    $watch (key, cb) {\n        let _binding = this._bindings[key];\n        _binding.watches.push(cb);\n    }\n\n    $reactive (obj={}) {\n        objectEach(_data, (path, item)=>{\n            this._initReactive(path, item);\n        });\n    }\n\n    /**\n     * 生命周期函数\n     */\n    beforeCompiler () {\n        if (this._opts.beforeCompiler && typeof this._opts.beforeCompiler == 'function') {\n            this._opts.beforeCompiler.call(this);\n        }\n    }\n     \n    ready () {\n        if (this._opts.ready && typeof this._opts.ready == 'function') {\n            this._opts.ready.call(this);\n        }\n    }\n\n    /**\n     * @private\n     */\n    _initComputed () {\n        /**\n         * computed 属性预处理\n         */\n        let _computed = this._opts.computed || {},\n            self = this;\n\n        for (let key in _computed) {\n            let computedGetter = _computed[key];\n            if (!isFunc(computedGetter)) {\n                continue;\n            }\n            let binding;\n            if (this._bindings[key]) {\n                console.warn('Can not redefine ' + key + ' property.');\n            } else {\n                let isComputed = true;\n                binding = new Binding(this, key, isComputed);\n                this._bindings[key] = binding;\n            }\n\n            /**\n             * 计算属性依赖监测\n             */\n            let watcher = new Watcher(binding);\n            observer.isObserving = true;\n            watcher.getDeps();\n            computedGetter.call(this);\n            observer.isObserving = false;\n            watcher.watch();\n\n            /**\n             * 初始化,等待值初始化完毕后在获取计算computed的值\n             */\n            setTimeout(()=>{\n                binding.update(binding.value);\n            }, 0);\n            /**\n             * 计算属性数据绑定处理，上面只对一级key做了处理，这里需要对子key处理\n             */\n            // function computedPropBinding () {\n            //     self.$watch(key, function (computedObj) {\n            //         objectEach(computedObj, (getterKey, obj)=>{\n\n            //         })\n            //     })\n            // }\n        }\n    }\n\n    _compileNode (el) {\n        let self = this;\n\n        if (el.nodeType === 3) {\n            self._compileTextNode(el);\n        } else if (el.attributes && el.attributes.length) {\n            getAttributes(el.attributes).forEach(function (attr) {\n                let directive = DirectiveParser.parse(attr.name, attr.value);\n                if (directive) {\n                    directive.vm = self;\n                    self._bind(el, directive);\n                }\n            });\n        }\n\n        if (el.childNodes.length) {\n            forEach(el.childNodes, function (child) {\n                self._compileNode(child);\n            });\n        }\n    }\n\n    _compileTextNode (el) {\n        return el;\n    }\n\n    /**\n     * bind directive\n     */\n    _bind (el, directive) {\n        el.removeAttribute(prefix + '-' + directive.name);\n        directive.el = el;\n\n        let key = directive.key,\n            binding = this._bindings[key];\n\n        if (!binding) {\n            /**\n             * computed property binding hack\n             * 针对计算属性子属性\n             */\n\n            //get computed property key\n            let computedKey = key.split('.')[0];\n            binding = this._bindings[computedKey];\n            if (binding.isComputed) {\n                binding.directives.push(directive);\n            } else {\n                console.error(key + ' is not defined.');\n            }\n        } \n        \n        binding.directives.push(directive);\n    } \n\n    _createBinding (key) {\n        this._bindings[key] = new Binding(this, key);\n        return this._bindings[key];\n    }\n\n    /**\n     * init reactive data\n     */\n    _initReactive (path, value) {\n        let binding;\n        if (this._bindings[path]) {\n            return ;\n        }\n\n        if (isObject(value)) {\n            binding = this._createBinding(path);\n\n            let bindings = objectMap(value, (key, item)=>{            \n                let childBinding = this._initReactive(`${path}.${key}`, item);\n                childBinding.parent = binding;\n                return childBinding;\n            });    \n            binding.children = bindings;\n        } else {\n            binding = this._createBinding(path);\n        }\n\n        return binding;\n    }\n\n    $get (path) {\n        return objectGet(this, path);\n    }\n\n    $set (path, value) {\n        return objectSet(this, path, value);\n    }\n}\n\n/**************************************************************\n * @privete\n * helper methods\n */\n\n/**\n * 获取节点属性\n * 'v-text'='counter' => {name: v-text, value: 'counter'}\n */\nfunction getAttributes (attributes) {\n    return map(attributes, function (attr) {\n        return {\n            name: attr.name,\n            value: attr.value\n        };\n    });\n}\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n\n// WEBPACK FOOTER //\n// ./src/main.js","import { directiveParser } from './parser.js';\nimport { objectEach } from './utils.js';\nimport { observer } from './observer.js';\nimport {\n    objectGet,\n    objectSet,\n    isObject,\n    isFunc\n} from './utils.js';\n\nconst def = Object.defineProperty;\n\nexport default class Binding {\n    constructor (vm, key, isComputed=false) {\n        this.vm = vm;\n        this.key = key;\n        this.isComputed = isComputed;\n        this.watches = [];\n\n        this.directives = [];\n        this.parent = null;\n        this.children = [];\n\n        /**\n         * for computed property\n         */\n        this.watcher = null;\n        /**\n         * init \n         */\n        this.defineReactive();\n    }\n\n\n    defineReactive () {\n        if (this.isComputed) {\n            this.defineComputedProperty();\n            return ;\n        }\n\n        let self = this;\n        let path = this.key.split('.');\n        let len = path.length;\n\n        let obj, key,\n            isObj = isObject(objectGet(this.vm._dataCopy, this.key));\n        if (len === 1) {\n            obj = this.vm;\n            key = this.key;\n            self.value = isObj ? objectGet(this.vm, key) : '';\n\n        } else {\n            let lastKey = path.splice(path.length - 1);\n            obj = objectGet(this.vm, path.join('.'));\n            key = lastKey[0];\n    \n            self.value = isObj ? objectGet(this.vm, key) : ''; \n        }\n\n        def(obj, key, {\n            get () {\n                observer.isObserving && observer.emit('get', self);\n                return self.value;\n            },\n            set (value) {\n                if (value !== self.value) {\n                    self.oldValue = self.value;\n                    if (!isObj) {\n                        self.value = value;\n                        self.update(value);\n                    } else {\n                        for (let prop in value) {\n                            self.value[prop] = value[prop];\n                        } \n                    }\n                    observer.emit(self.key, self);\n                    self.refresh();\n                }\n            }\n        });\n    }\n\n    defineComputedProperty () {\n        let key = this.key,\n            obj = this.vm,\n            self = this;\n\n        def(obj, key, {\n            get () {\n                let getter = self.vm._opts.computed[key];\n                if (isFunc(getter)) {\n                    self.value = getter.call(self.vm);\n\n                    return self.value;\n                }\n            },\n            set () {\n                //console.warn('computed property is readonly.');\n            }\n        });\n    }\n\n    update (value) {\n        let self = this;\n        this.directives.forEach(function (directive) {\n            /**\n             * 计算属性绑定对应于多个不同key的指令，所以值需要动态获取\n             */\n            if (self.isComputed) {\n                directive.update(objectGet(self.vm, directive.key));\n            } else {\n                directive.update(value);\n            }\n        });\n    }\n\n    refresh () {\n        if (this.isComputed) {\n            this.update(this.vm[this.key]);\n        }\n        /**\n         * notify parent\n         */\n        if (this.parent) {\n            this.parent.refresh();\n        }\n        \n        this.watches.forEach((cb)=>{\n            cb.call(this.vm, this.value, this.oldValue);\n        });\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/binding.js","import DirectiveParser from './parsers/directiveParser.js';\n\n\nexport {\n    DirectiveParser\n};\n\n\n// WEBPACK FOOTER //\n// ./src/parser.js","import Directives from '../directives/index.js';\n\nimport Config from '../config.js';\nconst { prefix } = Config;\n\nexport default class DirectiveParser {\n    constructor (directiveName, arg, expression) {\n        /**\n         * v-on:click=\"onChange\"\n           directiveName = 'v-on:click'\n           expression = 'onChange'\n         */\n\n        this.key = expression.trim();\n        this.name = directiveName;\n        this.arg = arg;\n\n        let directive = Directives[directiveName];\n\n        if (typeof directive === 'function') {\n            this.update = directive;\n        } else {\n            for (let prop in directive) {\n                if (prop === 'update') {\n                    this.update = directive.update;\n                }\n                this[prop] = directive[prop];\n            }\n        }\n    }\n\n\n    static parse (directiveName, expression) {\n        if (directiveName.indexOf(prefix + '-') === -1) { \n            return null; \n        }\n\n        /**\n         * 指令解析\n           v-on:click='onClick'\n           这里的指令名称为 'on', 'click'为指令的参数，onClick 为key\n         */\n\n        //移除 'v-' 前缀, 提取指令名称、指令参数\n        let directiveInfo = directiveName.slice(prefix.length + 1).split(':');\n            directiveName = directiveInfo[0];\n        let directiveArg = directiveInfo[1] ? directiveInfo[1] : null;\n        let directive = Directives[directiveName];\n            \n\n        /**\n         * 指令校验\n         */\n        if (!directive) {\n            console.warn('unknown directive: ' + directiveName);\n        }\n\n        return directive\n            ? new DirectiveParser(directiveName, directiveArg, expression)\n            : null;\n    }\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/parsers/directiveParser.js","/**\n * Directives\n */\n\nexport default {\n    /**\n     * 对应于 v-text 指令\n     */\n    text: function (value) {\n        this.el.textContent = value || '';\n    },\n    /**\n     * 对应于 v-model 指令\n     */\n    model: function (value) {\n        let eventName = 'keyup',\n            el = this.el,\n            self = this;\n        el.value = value || '';\n\n        /**\n         * 事件绑定控制\n         */\n        if (el.handlers && el.handlers[eventName]) {\n            el.removeEventListener(eventName, el.handlers[eventName]);\n        } else {\n            el.handlers = {};\n        }\n\n        el.handlers[eventName] = function (e) {\n            self[key] = e.target.value;\n        };\n\n        el.addEventListener(eventName, el.handlers[eventName]);\n    },\n    on: {\n        update: function (handler) {\n            let eventName = this.arg,\n                el = this.el;\n\n            if (!this.handlers) {\n                this.handlers = {};\n            }\n\n            var handlers = this.handlers;\n\n            if (handlers[eventName]) {\n                //绑定新的事件前移除原绑定的事件函数\n                el.removeEventListener(eventName, handlers[eventName]);\n            }\n            //绑定新的事件函数\n            if (handler) {\n                handler = handler.bind(this.vm);\n                el.addEventListener(eventName, handler);\n                handlers[eventName] = handler;\n            }\n        }\n    },\n    each: {\n        \n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/directives/index.js","export default {\n    prefix: 'v'\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/config.js","/**\n * type\n */\nconst toString = Object.prototype.toString;\nexport function typeOf (obj) {\n    return toString.call(obj).slice(8, -1);\n}\n\nexport function isObject (obj) {\n    return typeOf(obj) === 'Object' ? true : false;\n}\n\nexport function isFunc (obj) {\n    return typeOf(obj) === 'Function' ? true : false;\n}\n\n/*******************************************************\n * 数组相关\n */\nexport function forEach (arr=[], cb) {\n    [].forEach.call(arr, cb);\n}\n\nexport function map (arr=[], cb) {\n    return [].map.call(arr, cb);\n}\n\n/*******************************************************\n * 对象相关\n */\n\n/**\n * 对象继承\n */\nexport function extend (child, parent) {\n    parent = parent || {};\n    child = child || {};\n\n    for(let key in parent) {\n        if (parent.hasOwnProperty(key)) {\n            child[key] = parent[key];\n        }\n    }\n    console.log(child, parent);\n    return child;\n}\n\n/**\n * 对象遍历\n */\nexport function objectEach (obj={}, cb=()=>{}) {\n    Object.keys(obj).forEach(function (key) {\n        cb(key, obj[key]);\n    });\n}\n\nexport function objectMap (obj={}, cb=()=>{}) {\n    return Object.keys(obj).map(function (key) {\n        return cb(key, obj[key]);\n    });\n}\n\n/**\n * Object extend\n */\nexport function objectGet (obj, path='') {\n    path = path.split('.');\n    \n    if (obj[path[0]] == undefined) {\n        obj[path[0]] =  {};\n    }\n\n    if (path.length == 1) {\n        return obj[path[0]];\n    } else {\n        return objectGet(obj[path[0]], path.slice(1).join('.'));\n    }\n};\n\nexport function objectSet (obj, path='', value) {\n    path = path.split('.');\n    if (path.length == 1) {\n        obj[path[0]] = value;\n    } else {\n        obj[path[0]] = obj[path[0]] || {};\n        objectSet(obj[path[0]], path.slice(1).join('.'), value);\n    }\n};\n\n\n// WEBPACK FOOTER //\n// ./src/utils.js","import Event from './event.js';\n\nlet observer = new Event();\n\n/**\n * Array observer\n */\nlet arrProto = Array.prototype,\n    mutationMethods = [\n        'pop',\n        'push',\n        'reverse',\n        'shift',\n        'unshift',\n        'splice',\n        'sort'\n    ];\n\nfunction arrayObserver(arr, cb) {\n    mutationMethods.forEach(function (method) {\n        arr[method] = function (...rest) {\n            arrProto[method].apply(this, rest);\n\n            cb&&cb({\n                event: method,\n                args: rest,\n                array: arr\n            });\n        };\n    });\n}\n\nexport {\n    observer,\n    arrayObserver\n};\n\n\n\n// WEBPACK FOOTER //\n// ./src/observer.js","var slice = [].slice;\n\n/*\n* event control class\n* @param {context}\n*/\n\nfunction Event(ctx){\n    this._ctx = ctx || this;\n    this._events = {};\n}\n\nvar EventProto = Event.prototype;\n\n/*\n* bind a event\n* @param {event} eventType\n* @param {fn} function\n*/\nEventProto.on = function(event, fn){\n    this._events[event] = this._events[event] || [];\n    this._events[event].push(fn);\n\n    return this;\n};\n\n/*\n* bind an event but only called one time\n* @param {event} eventType\n* @param {fn} function\n*/\nEventProto.once = function(event, fn){\n    var self = this;\n\n    //when fn is called, remove all event listener\n    function fnWrap(){\n        self.off(event, fnWrap);\n        fn.apply(this, arguments);\n    }\n\n    //to specifiy remove method\n    fnWrap.fn = fn;\n    this.on(event, fnWrap);\n    return this;\n};\n\n\n/*\n* unbind an event  \n* @param {event} eventType\n* @param {fn} function\n*/\n\nEventProto.off = function(event, fn){\n    //remove all events\n    if(!arguments){\n        this._events = {};\n        return this;\n    }\n\n    //there are not fn binded\n    var events = this._events[event];\n    if(!events) return this;\n\n    //remove an type events\n    if(arguments.length === 1 && typeof event === 'string'){\n        delete this._events[event];\n        return this;\n    }\n\n    //remove fn\n    var handler;\n    for(var i = 0; i < events.length; i++){\n        handler = events[i];\n        if(handler === fn || handler.fn === fn){\n            events.splice(i, 1);\n            break;\n        }\n    }\n    return this;\n};\n\n/*\n* emit\n* @param {event}\n* @param {fn param}\n*/\nEventProto.emit = function(event){\n    var events = this._events[event],\n        args;\n    if(events){\n        events = events.slice(0);\n        args = slice.call(arguments, 1);\n        events.forEach((event)=>{\n            event.apply(this._ctx, args);\n        });\n    }\n    return this;\n};\n\nexport default Event;\n\n\n// WEBPACK FOOTER //\n// ./src/event.js","import { observer } from './observer.js';\n\n/**\n * watcher a key\n */\n\nexport default class Watcher {\n    constructor (binding) {\n        binding.watcher = this;\n\n        this.binding = binding;\n        this.dependencies = [];\n    }\n\n    getDeps () {\n        observer.on('get', (dep)=>{\n            this.dependencies.push(dep);\n        });\n    }\n\n    off () {\n        observer.off('get');\n    }\n\n    watch () {\n        let self = this;\n        this.dependencies.forEach((dep)=>{\n            observer.on(dep.key, ()=>{\n                self.binding.refresh();\n            });\n        });\n    }\n}\n\n\n// WEBPACK FOOTER //\n// ./src/watcher.js"],"sourceRoot":""}